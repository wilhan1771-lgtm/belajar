<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Buat Invoice</title>
  <style>
    body{font-family:Arial;padding:24px;background:#f3f4f6}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:16px;box-shadow:0 8px 20px rgba(0,0,0,.06)}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:12px}
    .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
    input{padding:10px;border:1px solid #d1d5db;border-radius:10px;width:100%}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{border:1px solid #e5e7eb;padding:10px;text-align:left}
    th{background:#f9fafb}
    .btn{padding:10px 14px;border:0;border-radius:10px;font-weight:700;cursor:pointer}
    .btn-primary{background:#2563eb;color:#fff}
    .btn-secondary{background:#111827;color:#fff;text-decoration:none;display:inline-block}
  </style>
</head>
<body>

<div class="top">
  <h2>Buat Invoice (Receiving ID {{ header["id"] }})</h2>
  <a class="btn btn-secondary" href="/receiving/{{ header['id'] }}">Kembali</a>
</div>

<div class="card">
  <div><b>Tanggal:</b> {{ header["tanggal"] }} | <b>Supplier:</b> {{ header["supplier"] }}</div>

  <form method="post" style="margin-top:12px;">
    <h3>Input Harga Patokan (Hari Ini)</h3>

     <div class="grid">
      {% for sz in required_sizes %}
      <div>
        <div>Harga size {{ sz }}</div>
        <input name="p{{ sz }}" type="number" placeholder="isi harga size {{ sz }}">
      </div>
        {% endfor %}
      </div>

    <div style="margin-top:10px;max-width:220px;">
      <label>PPH (%) <span style="font-size:12px;color:#6b7280;">(opsional)</span></label>
      <input
        type="number"
        name="pph"
        step="1"
        min="0"
        placeholder="Contoh: 1 = 1%"
          >
    </div>


    </div>

    <h3 style="margin-top:14px;">Data Partai (dari Receiving)</h3>
    <table>
      <thead>
        <tr>
          <th>Partai</th>
          <th>Round Size</th>
          <th>Netto (kg)</th>
        </tr>
      </thead>
      <tbody>
        {% for p in partai %}
        <tr>
          <td>{{ p["partai_no"] }}</td>
          <td>{{ p["round_size"] if p["round_size"] is not none else "-" }}</td>
          <td>{{ "%.2f"|format(p["netto"] or 0) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <button class="btn btn-primary" type="submit" style="margin-top:12px;">Generate Invoice</button>
  </form>
</div>

</body>
</html>
